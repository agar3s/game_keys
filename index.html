<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        background-color: #000;
        color: #0a0;
      }
      canvas {
        color: #010;
      }
    </style>
  </head>
  <body>
    <h1>Game Keys sample</h1>
    <canvas width=400 height=300></canvas>
    <table>
      <tr>
        <td>UP</td>
        <td id="UPd"></td>
        <td id="UPu"></td>
        <td id="UPp"></td>
      </tr>
      <tr>
        <td>LEFT</td>
        <td id="LEFTd"></td>
        <td id="LEFTu"></td>
        <td id="LEFTp"></td>
      </tr>
      <tr>
        <td>DOWN</td>
        <td id="DOWNd"></td>
        <td id="DOWNu"></td>
        <td id="DOWNp"></td>
      </tr>
      <tr>
        <td>RIGHT</td>
        <td id="RIGHTd"></td>
        <td id="RIGHTu"></td>
        <td id="RIGHTp"></td>
      </tr>
      <tr>
        <td>SPACE</td>
        <td id="SPACEd"></td>
        <td id="SPACEu"></td>
        <td id="SPACEp"></td>
      </tr>
    </table>

    <div id="virtualKeys">
      <button id="vk_space">SPACE</button>
      <button id="vk_up">UP</button>
      <button id="vk_down">DOWN</button>
      <button id="vk_left">LEFT</button>
      <button id="vk_right">RIGHT</button>
    </div>

    <script src="gkeys.js"></script>
    <script>
      gKeys.keyDown(function(keys){
        for(key in keys){
          document.getElementById(key+'d').innerHTML = keys[key].d;
          document.getElementById(key+'u').innerHTML = keys[key].u;
          document.getElementById(key+'p').innerHTML = keys[key].p;
        }
      });
      gKeys.keyUp(function(keys){
        for(key in keys){
          document.getElementById(key+'d').innerHTML = keys[key].d;
          document.getElementById(key+'u').innerHTML = keys[key].u;
          document.getElementById(key+'p').innerHTML = keys[key].p;
        }
      });

    window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })();
    // if you define a custom thread to update your canvas you can invoke the gKeys.scanKeys 
    // function to manage the key mapping at the same time that your game loop
    (function animloop(){
      requestAnimFrame(animloop);
      gKeys.scanKeys();
    })();
    </script>
  </body>
</html>
